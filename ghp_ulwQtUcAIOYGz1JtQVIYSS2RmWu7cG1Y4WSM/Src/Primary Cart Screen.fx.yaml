"'Primary Cart Screen' As screen":
    LoadingSpinnerColor: =RGBA(0, 120, 212, 1)

    Header_3 As Header:
        ScreenName: =varParty

    Gallery14 As gallery.galleryHorizontal:
        AccessibleLabel: ="Gallery14"
        BorderColor: =RGBA(0, 18, 107, 1)
        DelayItemLoading: =true
        Height: =60
        Items: |-
            =Table(
                {
                    ID: 1,
                    Title: "Order Summary"
                    
                },
                {
                     ID: 2,
                    Title: "Order Terms"
                   
                }
            )
        LoadingSpinner: =LoadingSpinner.Data
        ShowScrollbar: =false
        TabIndex: =0
        TemplateSize: =Self.Width/CountRows(Self.AllItems) - 8
        Width: =600
        X: =40
        Y: =60
        ZIndex: =2

        Label69 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: |-
                =If(ThisItem.IsSelected,ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                //ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                ,ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Text Primary Color").'Default Value') //ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Text Primary Color").'Default Value') //_VarGblAppColors.textbgbutton
                )
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Semibold
            Height: =50
            OnSelect: =Select(Parent)
            Size: =16
            Text: =ThisItem.Title
            Width: =Parent.TemplateWidth
            ZIndex: =1

        Rectangle38 As rectangle:
            BorderColor: =RGBA(0, 18, 107, 1)
            Fill: |-
                =If(ThisItem.IsSelected,ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                ,Color.White)
            Height: =2
            OnSelect: =Select(Parent)
            X: =Parent.TemplateWidth/2-Self.Width/2
            Y: =48
            ZIndex: =2

    Container16 As groupContainer.manualLayoutContainer:
        Height: =900
        Visible: =If(Gallery14.Selected.Title="Order Summary",true,false)
        Width: =640
        Y: =122
        ZIndex: =3

        Gallery17 As gallery.galleryVertical:
            AccessibleLabel: ="Gallery17"
            BorderColor: =RGBA(0, 18, 107, 1)
            DelayItemLoading: =true
            Height: =250
            Items: |-
                =ForAll(
                    [
                        {
                            Title: "Order Date",
                            Value: Text(
                                Today(),
                                "dd-mm-yy"
                            )
                        },
                        {
                            Title: "Supplier",
                            Value: varParty
                        },
                        {
                            Title: "Total Price",
                            Value: If(
                                'Product List_1'.OrderType = "Primary" || primarydata.'Order Type' = 'Order Type Choice'.Primary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Sum(
                                            colPrimaryCart,
                                            (baseUnitPrice * quantity)
                                        ),
                                        //"[$-hi-IN]##,##,##,###",
                                       // "hi-IN"
                                        "[$-en-US]#.00"
                                    )
                                ),
                                'Product List_1'.OrderType = "Secondary" || secondarydata.'Order Type' = 'Order Type Choice'.Secondary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Sum(
                                            colSecondaryCart,
                                            (baseUnitPrice * quantity)
                                        ),
                                       /* "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                )
                            )
                        },
                        {
                            Title: "Discount",
                            Value: If(
                                'Product List_1'.OrderType = "Primary" || primarydata.'Order Type' = 'Order Type Choice'.Primary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Round(
                                            Sum(
                                                colPrimaryCart,
                                                (baseUnitPrice * (discount / 100)) * quantity
                                            ),
                                            2
                                        ),
                                       /* "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                ),
                                'Product List_1'.OrderType = "Secondary" || secondarydata.'Order Type' = 'Order Type Choice'.Secondary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Round(
                                            Sum(
                                                colSecondaryCart,
                                                (baseUnitPrice * (discount / 100)) * quantity
                                            ),
                                            2
                                        ),
                                        /*"[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                )
                            )
                        },
                        {
                            Title: "Net Price",
                            Value: If(
                                'Product List_1'.OrderType = "Primary" || primarydata.'Order Type' = 'Order Type Choice'.Primary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Sum(
                                            colPrimaryCart,
                                            (baseUnitPrice - (baseUnitPrice * (discount / 100))) * quantity
                                        ) + (Sum(
                                            colPrimaryCart,
                                            igstAmount
                                        ) + Sum(
                                            colPrimaryCart,
                                            cgstAmount
                                        ) + Sum(
                                            colPrimaryCart,
                                            sgstAmount
                                        ) + Sum(
                                            colPrimaryCart,
                                            cessAmount
                                        )),
                                        /*"[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                ),
                                'Product List_1'.OrderType = "Secondary" || secondarydata.'Order Type' = 'Order Type Choice'.Secondary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Sum(
                                            colSecondaryCart,
                                            (baseUnitPrice - (baseUnitPrice * (discount / 100))) * quantity
                                        ) + (Sum(
                                            colSecondaryCart,
                                            igstAmount
                                        ) + Sum(
                                            colSecondaryCart,
                                            cgstAmount
                                        ) + Sum(
                                            colSecondaryCart,
                                            sgstAmount
                                        ) + Sum(
                                            colSecondaryCart,
                                            cessAmount
                                        )),
                                       /* "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                )
                            )
                        },
                        {
                            Title: "Tax",
                            Value: If(
                                'Product List_1'.OrderType = "Primary" || primarydata.'Order Type' = 'Order Type Choice'.Primary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        (Sum(
                                            colPrimaryCart,
                                            igstAmount
                                        ) + Sum(
                                            colPrimaryCart,
                                            cgstAmount
                                        ) + Sum(
                                            colPrimaryCart,
                                            sgstAmount
                                        ) + Sum(
                                            colPrimaryCart,
                                            cessAmount
                                        )) ,
                                      /*  "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                ),
                                'Product List_1'.OrderType = "Secondary" || secondarydata.'Order Type' = 'Order Type Choice'.Secondary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        (Sum(
                                            colSecondaryCart,
                                            igstAmount
                                        ) + Sum(
                                            colSecondaryCart,
                                            cgstAmount
                                        ) + Sum(
                                            colSecondaryCart,
                                            sgstAmount
                                        ) + Sum(
                                            colSecondaryCart,
                                            cessAmount
                                        )),
                                       /* "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                )
                            )
                        },
                        {
                            Title: "Disc.Price",
                            Value: If(
                                'Product List_1'.OrderType = "Primary" || primarydata.'Order Type' = 'Order Type Choice'.Primary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Sum(
                                            colPrimaryCart,
                                            (baseUnitPrice - (baseUnitPrice * (discount / 100))) * quantity
                                        ),
                                       /* "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                ),
                                'Product List_1'.OrderType = "Secondary" || secondarydata.'Order Type' = 'Order Type Choice'.Secondary,
                                Concatenate(
                                    "₹",
                                    Text(
                                        Sum(
                                            colSecondaryCart,
                                            (baseUnitPrice - (baseUnitPrice * (discount / 100))) * quantity
                                        ),
                                      /*  "[$-hi-IN]##,##,##,###",
                                        "hi-IN"*/
                                        "[$-en-US]#.00"
                                    )
                                )
                            )
                        },
                        {
                            Title: "IGST",
                            Value: Concatenate(
                                "₹",
                                Text(
                                    Sum(
                                        colPrimaryCart,
                                        igstAmount
                                    ),
                                    /*"[$-hi-IN]##,##,##,###",
                                    "hi-IN"*/
                                    "[$-en-US]#.00"
                                )
                            )
                        },
                        {
                            Title: "CGST",
                            Value: Concatenate(
                                "₹",
                                Text(
                                    Sum(
                                        colPrimaryCart,
                                        cgstAmount
                                    ),
                                    /*"[$-hi-IN]##,##,##,###",
                                    "hi-IN"*/
                                    "[$-en-US]#.00"
                                )
                            )
                        },
                        {
                            Title: "SGST",
                            Value: Concatenate(
                                "₹",
                                Text(
                                    Sum(
                                        colPrimaryCart,
                                        sgstAmount
                                    ),
                                   /* "[$-hi-IN]##,##,##,###",
                                    "hi-IN"*/
                                    "[$-en-US]#.00"
                                )
                            )
                        },
                        {
                            Title: "Cess",
                            Value: Concatenate(
                                "₹",
                                Text(
                                    Sum(
                                        colPrimaryCart,
                                        cessAmount
                                    ),
                                   /* "[$-hi-IN]##,##,##,###",
                                    "hi-IN"*/
                                    "[$-en-US]#.00"
                                )
                            )
                        },
                    ],
                    {Value: ThisRecord}
                )
            Layout: =Layout.Vertical
            LoadingSpinner: =LoadingSpinner.Data
            ShowScrollbar: =false
            TabIndex: =0
            TemplateSize: =35
            Width: =600
            WrapCount: =2
            X: =20
            ZIndex: =1

            Label71 As label:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FontWeight: =FontWeight.Semibold
                Height: =30
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.Value.Title
                Width: =216
                ZIndex: =1

            Label72 As label:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =30
                OnSelect: =Select(Parent)
                Text: =ThisItem.Value.Value
                X: =142.5
                ZIndex: =2

        Label73 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Bold
            Height: =50
            Size: =20
            Text: ="Order Products"
            Width: =560
            X: =20
            Y: =250
            ZIndex: =2

        "Cart_10 As 'Primary Cart'":
            CartType: =  "Primary"
            Fill: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Screen Background Color").'Default Value') //ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Screen Background Color").'Default Value') //_VarGblAppColors.BackgroundColor
            Height: =600
            Visible: =true
            Y: =300
            ZIndex: =3

        Icon6_1 As icon.Add:
            BorderColor: =RGBA(166, 166, 166, 1)
            Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(220, 220, 220, 1)
            DisabledFill: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =4
            Height: =40
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
            HoverFill: =RGBA(0, 0, 0, 0)
            Icon: =Icon.Add
            OnSelect: |
                =Set(
                    varprimaryparty,
                    LookUp(
                        OfflinePartiesCollection,
                        Parties = primarydata.'Order From'.Parties
                    ).'Price List'.Name
                );
                Set(
                    varPartyPricelist,
                    varprimaryparty
                );
                Set(
                    varParty,
                    primarydata.'Order From'.'Customer Name'
                );
                Set(
                    varCustomerforDiscount,
                    primarydata.'Order From'.Parties
                );
                Set(
                    varCustomertype,
                    primarydata.'Order From'.'Customer Type'
                );
                ClearCollect(
                    colPartyOrder,
                    Sort(
                        Filter(
                            OfflineOrderHeaderCollection,
                            'Order From'.Parties = primarydata.'Order From'.Parties
                        ),
                        'Created On',
                        SortOrder.Descending
                    )
                );
                ForAll(
                    colPartyOrder As oneline,
                    Collect(
                        colOrderlineproduct,
                        Filter(
                            'Order Lines.S',
                            'Order Header'.'Order Header' = oneline.'Order Header'
                        )
                    )
                );
                ClearCollect(
                    colDistinctProduct,
                    Distinct(
                        colOrderlineproduct,
                        'Product SKU'.'Product SKU'
                    )
                );
                Navigate('Order Screen');
            PressedBorderColor: =RGBA(0, 0, 0, 0)
            PressedColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
            PressedFill: =RGBA(0, 0, 0, 0)
            Visible: =If(IsBlank(primarydata),false,true)
            Width: =40
            X: =580
            Y: =260
            ZIndex: =4

    "'Bottom Bar_5' As 'Bottom Bar'":
        Y: =1026
        ZIndex: =4

    Container17 As groupContainer.manualLayoutContainer:
        Height: =862
        Visible: =If(Gallery14.Selected.Title="Order Terms",true,false)
        Width: =App.Width
        Y: =120
        ZIndex: =5

        Group21 As group:
            Height: =5
            Width: =5
            X: =40
            Y: =40
            ZIndex: =4

            Button42 As button:
                DisabledBorderColor: =RGBA(219, 219, 219, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(56, 96, 178, 1)
                FontWeight: =FontWeight.Semibold
                Height: =60
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Size: =24
                Text: =""
                Width: =525
                X: =60
                Y: =170
                ZIndex: =1

            ComboBox7 As combobox:
                AccessibleLabel: ="Combobox7"
                BorderColor: =RGBA(0, 18, 107, 1)
                BorderStyle: =BorderStyle.None
                BorderThickness: =0
                ChevronBackground: =RGBA(255, 255, 255, 1)
                ChevronDisabledBackground: =RGBA(166, 166, 166, 1)
                ChevronDisabledFill: =RGBA(244, 244, 244, 1)
                ChevronFill: =RGBA(0, 0, 0, 1)
                ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                ChevronHoverFill: =RGBA(255, 255, 255, 1)
                DefaultSelectedItems: =LookUp(OfflinePartiesCollection,'Customer Name'= varParty)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayFields: =["zx_name"]
                DisplayMode: =DisplayMode.View
                Height: =45
                HoverColor: =RGBA(0, 0, 0, 1)
                HoverFill: =RGBA(186, 202, 226, 1)
                InputTextPlaceholder: =
                Items: ='Parties.S'
                PressedColor: =RGBA(255, 255, 255, 1)
                PressedFill: =RGBA(0, 18, 107, 1)
                SearchFields: =["zx_name"]
                SearchItems: =Search('Parties.S',ComboBox7.SearchText,"zx_name")
                SelectionFill: =RGBA(0, 0, 0, 0)
                SelectMultiple: =false
                Size: =14
                Width: =510
                X: =74
                Y: =179
                ZIndex: =2

            Label74 As label:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Semibold
                Size: =16
                Text: ="Bill To"
                Width: =90
                X: =112
                Y: =149
                ZIndex: =3

        Group21_1 As group:
            Height: =5
            Width: =5
            X: =-9
            Y: =-22
            ZIndex: =7

            Button42_1 As button:
                DisabledBorderColor: =RGBA(219, 219, 219, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(56, 96, 178, 1)
                FontWeight: =FontWeight.Semibold
                Height: =60
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Size: =24
                Text: =""
                Width: =525
                X: =60
                Y: =280
                ZIndex: =4

            ComboBox7_2 As combobox:
                AccessibleLabel: ="Combobox7_2"
                BorderColor: =RGBA(0, 18, 107, 1)
                BorderStyle: =BorderStyle.None
                BorderThickness: =0
                ChevronBackground: =RGBA(255, 255, 255, 1)
                ChevronDisabledBackground: =RGBA(166, 166, 166, 1)
                ChevronDisabledFill: =RGBA(244, 244, 244, 1)
                ChevronFill: =RGBA(0, 0, 0, 1)
                ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                ChevronHoverFill: =RGBA(255, 255, 255, 1)
                DefaultSelectedItems: =LookUp(OfflinePartiesCollection,'Customer Name'= varParty)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayFields: =["zx_name"]
                Height: =45
                HoverColor: =RGBA(0, 0, 0, 1)
                HoverFill: =RGBA(186, 202, 226, 1)
                InputTextPlaceholder: =
                Items: ='Parties.S'
                PressedColor: =RGBA(255, 255, 255, 1)
                PressedFill: =RGBA(0, 18, 107, 1)
                SearchFields: =["zx_name"]
                SearchItems: =Search('Parties.S',ComboBox7_2.SearchText,"zx_name")
                SelectionFill: =RGBA(0, 0, 0, 0)
                SelectMultiple: =false
                Size: =14
                Width: =500
                X: =77
                Y: =289
                ZIndex: =5

            Label74_1 As label:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Semibold
                Size: =16
                Text: ="Ship To Party"
                Width: =160
                X: =111
                Y: =259
                ZIndex: =6

        Group21_2 As group:
            Height: =5
            Width: =5
            X: =11
            Y: =-2
            ZIndex: =10

            Button42_2 As button:
                DisabledBorderColor: =RGBA(219, 219, 219, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(56, 96, 178, 1)
                FontWeight: =FontWeight.Semibold
                Height: =60
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Size: =24
                Text: =""
                Width: =525
                X: =65
                Y: =72
                ZIndex: =7

            ComboBox7_3 As combobox:
                AccessibleLabel: ="Combobox7_3"
                BorderColor: =RGBA(0, 18, 107, 1)
                BorderStyle: =BorderStyle.None
                BorderThickness: =0
                ChevronBackground: =RGBA(255, 255, 255, 1)
                ChevronDisabledBackground: =RGBA(166, 166, 166, 1)
                ChevronDisabledFill: =RGBA(244, 244, 244, 1)
                ChevronFill: =RGBA(0, 0, 0, 1)
                ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                ChevronHoverFill: =RGBA(255, 255, 255, 1)
                DefaultSelectedItems: =LookUp('Payment Terms.S',Name= varpaymentterm)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayFields: =["zx_name"]
                Height: =45
                HoverColor: =RGBA(0, 0, 0, 1)
                HoverFill: =RGBA(186, 202, 226, 1)
                InputTextPlaceholder: =
                Items: ='Payment Terms.S'
                PressedColor: =RGBA(255, 255, 255, 1)
                PressedFill: =RGBA(0, 18, 107, 1)
                SearchFields: =["zx_name"]
                SearchItems: =Search('Payment Terms.S',ComboBox7_3.SearchText,"zx_name")
                SelectionFill: =RGBA(0, 0, 0, 0)
                SelectMultiple: =false
                Size: =14
                Width: =510
                X: =65
                Y: =81
                ZIndex: =8

            Label74_2 As label:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Semibold
                Size: =16
                Text: ="Payment Terms"
                Width: =180
                X: =65
                Y: =51
                ZIndex: =9

        TextInput1 As text:
            AccessibleLabel: ="TextInput1"
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            Color: =RGBA(51, 51, 51, 1)
            Default: =LookUp(OfflinePartiesCollection,'Customer Name'= varParty).Address
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            Height: =67
            HintText: ="Ship to Address"
            HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
            HoverColor: =RGBA(51, 51, 51, 1)
            HoverFill: =RGBA(255, 255, 255, 1)
            PressedBorderColor: =RGBA(0, 120, 212, 1)
            PressedColor: =RGBA(51, 51, 51, 1)
            PressedFill: =RGBA(255, 255, 255, 1)
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =16
            Width: =483
            X: =77
            Y: =407
            ZIndex: =13

        Group21_3 As group:
            Height: =5
            Width: =5
            X: =31
            Y: =18
            ZIndex: =13

            Button42_3 As button:
                DisabledBorderColor: =RGBA(219, 219, 219, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(56, 96, 178, 1)
                FontWeight: =FontWeight.Semibold
                Height: =90
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Size: =24
                Text: =""
                Width: =525
                X: =60
                Y: =396
                ZIndex: =10

            Label74_3 As label:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Semibold
                Height: =60
                Size: =16
                Text: ="Ship To Address"
                Width: =180
                X: =111
                Y: =365
                ZIndex: =12

        btnCnfrm_2 As button:
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            DisplayMode: |-
                =//DisplayMode.Edit
                If(
                    CountRows(colPrimaryCart) > 0 ,
                    DisplayMode.Edit,
                    DisplayMode.Disabled
                )
            Fill: =ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
            FontWeight: =FontWeight.Semibold
            Height: =50
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: |-
                =ColorFade(
                    ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )//ColorValue(LookUp(c_EnvironmentVariable,'Display Name'="Button Fill").'Default Value' )
                    , -20%)
            OnSelect: |
                =Set(
                        varTotalBill,
                        RoundUp(
                            Value(
                                Sum(
                                    colPrimaryCart,
                                    (baseUnitPrice - (baseUnitPrice * (discount / 100))) * quantity
                                ) + (Sum(
                                    colPrimaryCart,
                                    igstAmount
                                ) + Sum(
                                    colPrimaryCart,
                                    cgstAmount
                                ) + Sum(
                                    colPrimaryCart,
                                    sgstAmount
                                ) + Sum(
                                    colPrimaryCart,
                                    cessAmount
                                ))
                            ),
                            2
                        )
                    );
                    If(
                    (varActivated = 'Credit Activated (Parties.S)'.Yes && Value(varRemainingCreditLimit) < Value(varTotalBill)),
                    Notify(
                        "You have insufficient credit balance",
                        NotificationType.Error,
                        2000
                    ),
                    Set(
                        _VarOrderResponse,
                        Patch(
                            'Order Header.S',
                            Defaults('Order Header.S'),
                            {
                                'Order From': LookUp(
                                    OfflinePartiesCollection,
                                    'Customer Name' = varParty
                                ),
                                'Order To': LookUp(
                                    OfflinePartiesCollection,
                                    'Customer Name' = varSelectedRetailerAttachedDistributor
                                ),
                                'Order Status': 'Order Status Choice'.Open,
                                'Order Type': 'Order Type Choice'.Primary,
                                SGST: /*(Sum(
                                colPrimaryCart,
                                baseUnitPrice * quantity
                            ) * 0.09)*/
                Sum(
                                    colPrimaryCart,
                                    sgstAmount
                                ),
                                CGST: /*(Sum(
                                colPrimaryCart,
                                baseUnitPrice * quantity
                            ) * 0.09)*/
                Sum(
                                    colPrimaryCart,
                                    cgstAmount
                                ),
                                'Payment Terms': LookUp(
                                    'Payment Terms.S',
                                    Name = ComboBox7_3.Selected.Name
                                ),
                                'Bill To': LookUp(
                                    OfflinePartiesCollection,
                                    'Customer Name' = ComboBox7_7.Selected.'Customer Name'
                                ),
                                'Ship To': LookUp(
                                    OfflinePartiesCollection,
                                    'Customer Name' = ComboBox7_8.Selected.'Customer Name'
                                ),
                                'Ship to Address': TextInput1_2.Text,
                                'Cess %': Sum(
                                    colPrimaryCart,
                                    cessAmount
                                ),
                                /*Attachment: {
                               // FileName: First(DataCardValue30_3.Attachments).Name,
                                Value: First(DataCardValue30_3.Attachments).Value
                            },*/
                                IGST: Sum(
                                    colPrimaryCart,
                                    igstAmount
                                ),
                                Quantity: Sum(
                                    colPrimaryCart,
                                    quantity
                                ),
                                'Discount%': Sum(
                                    colPrimaryCart,
                                    discount
                                ),
                                'Discount ': Sum(
                                    colPrimaryCart,
                                    (baseUnitPrice * (discount / 100)) * quantity// after discount
                                ),
                                'Order Date': Today(),
                                'Total Price': Sum(
                                    colPrimaryCart,
                                    (baseUnitPrice * quantity)
                                ),
                                // CountRows( colPrimaryCart),
                                'Total Bill Amount': Sum(
                                    colPrimaryCart,
                                    (baseUnitPrice - (baseUnitPrice*(discount / 100))) * quantity
                                ) + Sum(
                                    colPrimaryCart,
                                    igstAmount
                                ) + Sum(
                                    colPrimaryCart,
                                    cgstAmount
                                ) + Sum(
                                    colPrimaryCart,
                                    sgstAmount
                                )
                            }
                        );
                    );
                    // ORDERLINE PATCH IN ONLINE MODE ################################################################################
                If(
                        !IsBlank(_VarOrderResponse),
                        ForAll(
                            colPrimaryCart As ItemOrderLine,
                            Patch(
                                'Order Lines.S',
                                Defaults('Order Lines.S'),
                                {
                                    'Order Header': LookUp(
                                        'Order Header.S',
                                        'Order ID' = _VarOrderResponse.'Order ID'
                                    ),
                                    Product: LookUp(
                                        OfflineProductCollection,
                                        Product = ItemOrderLine.product
                                    ),
                                    'Product SKU': LookUp(
                                        OfflineProductSKUCollection,
                                        'Product SKU' = ItemOrderLine.productSKU
                                    ),
                                    'Unit Price': ItemOrderLine.baseUnitPrice,
                                    'Discount %': ItemOrderLine.discount,
                                    'Discount Amount': ItemOrderLine.baseUnitPrice * (ItemOrderLine.discount / 100) * ItemOrderLine.quantity,
                                    'Total Unit Price': (ItemOrderLine.baseUnitPrice - (ItemOrderLine.baseUnitPrice*(ItemOrderLine.discount / 100))) * Value(ItemOrderLine.quantity),
                                    Quantity: Value(ItemOrderLine.quantity),
                                    Variant: LookUp(
                                        OfflineProductVariantCollection,
                                        Variant.'Variant Code' = ItemOrderLine.Variant
                                    )
                                }
                            );
                        //Stock Update ____________________________________________________________________________________________________________
                If(
                                IsBlank(
                                    LookUp(
                                        'Stock.S',
                                        'Product SKU'.'Product SKU' = ItemOrderLine.productSKU && Customer.Parties = GUID(varCustomerforDiscount)
                                    )
                                ),
                                Patch(
                                    'Stock.S',
                                    Defaults('Stock.S'),
                                    {
                                        'Product SKU': LookUp(
                                            OfflineProductSKUCollection,
                                            'Product SKU' = ItemOrderLine.productSKU
                                        ),
                                        Customer: LookUp(
                                            OfflinePartiesCollection,
                                            Parties = GUID(varCustomerforDiscount)
                                        ),
                                        'Last Updated Date': Now(),
                                        Quantity: Value(ItemOrderLine.quantity)
                                    }
                                );
                                ,
                            //Update Stock________________________________________________
                                Patch(
                                    'Stock.S',
                                    LookUp(
                                        'Stock.S',
                                        'Product SKU'.'Product SKU' = ItemOrderLine.productSKU && Customer.Parties = GUID(varCustomerforDiscount)
                                    ),
                                    {
                                        'Product SKU': LookUp(
                                            OfflineProductSKUCollection,
                                            'Product SKU' = ItemOrderLine.productSKU
                                        ),
                                        Customer: LookUp(
                                            OfflinePartiesCollection,
                                            Parties = GUID(varCustomerforDiscount)
                                        ),
                                        'Last Updated Date': Now(),
                                        Quantity: Value(
                                            LookUp(
                                                'Stock.S',
                                                'Product SKU'.'Product SKU' = ItemOrderLine.productSKU && Customer.Parties = GUID(varCustomerforDiscount)
                                            ).Quantity
                                        ) + Value(ItemOrderLine.quantity)
                                    }
                                );
                            );
                        )
                    );
                    
                //Invoice Header Logic--------------------------------------------------------------------------
                Set(
                        _varInvoiceResponsee,
                        Patch(
                            'Invoice.S',
                            Defaults('Invoice.S'),
                            {
                                'Order No.': LookUp(
                                    'Order Header.S',
                                    'Order ID' = _VarOrderResponse.'Order ID'
                                ),
                                Party: LookUp(
                                    OfflinePartiesCollection,
                                    'Customer Name' = varParty
                                ),
                                'Total Discount': _VarOrderResponse. 'Discount%',
                                'Total Amount': _VarOrderResponse.'Total Bill Amount',
                                CGST: _VarOrderResponse.CGST,
                                SGST: _VarOrderResponse.SGST,
                                IGST: _VarOrderResponse.IGST
                            }
                        )
                    );
                    
                //Invoice Line Logic:-----------------------------------------------------------------------------------
                If(
                        !IsBlank(_varInvoiceResponsee),
                        ForAll(
                            colPrimaryCart As InvoiceLine,
                            Patch(
                                'Invoice Line.S',
                                Defaults('Invoice Line.S'),
                                {
                                    'Unit Price': InvoiceLine.baseUnitPrice,
                                    Discount: InvoiceLine.discount,
                                    'Product SKU': LookUp(
                                        OfflineProductSKUCollection,
                                        'Product SKU' = InvoiceLine.productSKU
                                    ),
                                    Invoice: LookUp(
                                        'Invoice.S',
                                        'Invoice Id' = _varInvoiceResponsee.'Invoice Id'
                                    ),
                                    Quantity: Value(InvoiceLine.quantity),
                                    'Discounted Base Price': Sum(
                                        colPrimaryCart,
                                        (baseUnitPrice - (baseUnitPrice*(discount / 100))) * quantity
                                    )
                                }
                            )
                        )
                    );
                    Notify(
                        "Stock has been updated.",
                        NotificationType.Success,
                        3000
                    );
                    Notify(
                        "Order has been placed. Your order ID is " & _VarOrderResponse.'Order ID',
                        NotificationType.Success,
                        10000
                    );
                    ClearCollect(
                        OfflineOrderHeaderCollection,
                        Filter(
                            'Order Header.S',
                            'Owning User'.'Primary Email' = User().Email
                        )
                    );
                    ClearCollect(
                        OfflineOrderLineCollection,
                        Filter(
                            'Order Lines.S',
                            'Owning User'.'Primary Email' = User().Email
                        )
                    );
                    ClearCollect(
                        OfflineInvoiceCollection,
                        'Invoice.S'
                    );
                    ClearCollect(
                        OfflineInvoiceLineCollection,
                        'Invoice Line.S'
                    );
                    Clear(colPrimaryCart);
                    Clear(colPrimaryCart);
                    Set(
                        varParty,
                        Blank()
                    );
                    Navigate(
                        'Primary Order Screen',
                        ScreenTransition.CoverRight
                    )
                );
            Size: =20
            Text: ="Confirm"
            Width: =258
            X: =189
            Y: =655
            ZIndex: =14

