"'Visit List View' As CanvasComponent":
    DataSource: =
    Fill: =RGBA(237, 237, 237, 1)
    Height: =App.Height - 180
    VisitDate: |-
        =//Now()
        Today()
    Width: =640
    X: =0
    Y: =0
    ZIndex: =1

    Gallery1_1 As gallery.galleryVertical:
        AccessibleLabel: ="List View"
        BorderColor: =RGBA(0, 18, 107, 1)
        BorderStyle: =BorderStyle.None
        Height: =Parent.Height
        Items: |-
            =SortByColumns(
                Sort(
                   // Filter(
                    Filter(
                        OfflineVisitCollection,
                        zx_visitdate >= 'Visit List View'.VisitDate && 'Owning User'.'Primary Email' =User().Email
            
                        // ComboBox2_1.Selected.'Primary Email
                    ),
                       // IsToday('Created On')
                   // ),
                    createdon,
                    SortOrder.Descending
                ),
                "zx_visitstatus",
                [
                    [@'Visit Status'].Started,
                    [@'Visit Status'].'Not Started',
                    [@'Visit Status'].Completed
                ]
            )
            /*Sort(Filter(
                OfflineVisitCollection,
                DateValue('Visit date') >= 'Visit List View'.VisitDate 
            ),'Created On',SortOrder.Descending)*/
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TabIndex: =
        TemplatePadding: =10
        TemplateSize: =280
        Y: =5
        ZIndex: =1

        Background_2 As button:
            BorderColor: =RGBA(0, 121, 187, 1)
            BorderThickness: =1
            Color: =_VarGblAppColors.AccentBg
            DisabledBorderColor: =RGBA(102, 182, 227, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =_VarGblAppColors.AccentBg
            DisplayMode: =DisplayMode.Disabled
            Fill: =RGBA(56, 96, 178, 1)
            FontWeight: =FontWeight.Semibold
            Height: =275
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =15
            RadiusBottomRight: =15
            RadiusTopLeft: =15
            RadiusTopRight: =15
            Size: =24
            Text: =""
            Width: =600
            X: =10
            ZIndex: =1

        TitleLbl_1 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Bold
            Height: =30
            LineHeight: =1
            OnSelect: =Select(Parent)
            Size: =16
            Text: =ThisItem.Party.'Customer Name'
            Width: =300
            X: =77
            Y: =20
            ZIndex: =2

        Title2Lbl_1 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =_VarGblAppColors.PrimaryRed
            DisabledColor: =RGBA(166, 166, 166, 1)
            Font: =Font.'Segoe UI'
            Height: =35
            LineHeight: =1
            OnSelect: =Select(Parent)
            Size: =12
            Text: =ThisItem.Party.Address
            Width: =296
            X: =77
            Y: =45
            ZIndex: =3

        Icon2 As icon.Leave:
            AccessibleLabel: ="Start visit"
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =_VarGblAppColors.AccentBg
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            DisplayMode: |-
                =If(
                    LookUp(
                        OfflineVisitCollection,
                        zx_visitid = ThisItem.zx_visitid
                    ).zx_visitstatus = 'Visit Status'.Completed,
                    DisplayMode.View,
                    DisplayMode.Edit
                )
            Height: =25
            Icon: =Icon.Leave
            OnSelect: |
                =If(
                    ThisItem.createdby.'Primary Email' = User().Email,
                    If(
                        CountIf(
                            Attendances,
                            User.'Primary Email' = User().Email && Date = Today() && !IsBlank('Check-out Time')
                        ) > 0,
                        Notify(
                            "Your day has Ended, you can not start Visit",
                            NotificationType.Error,
                            2000
                        ),
                        If(
                            CountIf(
                                Attendances,
                                User.'Primary Email' = User().Email && Date = Today() && !IsBlank('Check-in Time')
                            ) = 0,
                            Notify(
                                "Kindly Start your day first",
                                NotificationType.Error,
                                2000
                            );
                            Navigate(Home),
                            If(
                                Not(
                                    Text(
                                        ThisItem.zx_visitdate,
                                        "dd/mm/yyyy"
                                    ) = Text(
                                        Today(),
                                        "dd/mm/yyyy"
                                    )
                                ),
                                Notify(
                                    "Visit cannot be started",
                                    NotificationType.Error,
                                    2000
                                ),
                                IsBlank(
                                    LookUp(
                                        OfflineVisitCollection,
                                        zx_visitdate = Today() && createdby.'Primary Email' = User().Email && zx_visitstatus = [@'Visit Status'].Started && Not(zx_visitid = ThisItem.zx_visitid)
                                    )
                                ),
                                If(
                                    Connection.Connected,
                                    Patch(
                                        'Visit.S',
                                        LookUp(
                                            'Visit.S',
                                            zx_visitid = ThisItem.zx_visitid
                                        ),
                                        {
                                            'Visit Status': 'Visit Status'.Started,
                                            'Check-in Time': Now(),
                                            'Check-in Geo Location Lat': Location.Latitude,
                                            'Check-in Geo Location Long': Location.Longitude,
                                            zx_checkinaddress: LookUp(
                                                'Parties.S',
                                                Address = ThisItem.zx_Party.Address
                                            ).Address
                                        }
                                    );
                                    Notify(
                                        "Visit has been started",
                                        NotificationType.Success,
                                        700
                                    );
                                    ,
                                    Collect(
                                        OfflineVisitsToBeSynced,
                                        {
                                            visitItem: LookUp(
                                                OfflineVisitCollection,
                                                zx_visitid = ThisItem.zx_visitid
                                            ),
                                            zx_visitid: ThisItem.zx_visitid,
                                            zx_visitstatus: 'Visit Status'.Started,
                                            zx_checkintime: Now(),
                                            zx_checkingeolocationlat: Location.Latitude,
                                            zx_checkingeolocationlong: Location.Longitude,
                                            zx_checkinaddress: LookUp(
                                                'Parties.S',
                                                Address = ThisItem.zx_Party.Address
                                            ).Address
                                        }
                                    );
                                    Patch(
                                        OfflineVisitCollection,
                                        LookUp(
                                            OfflineVisitCollection,
                                            zx_visitid = ThisItem.zx_visitid
                                        ),
                                        {
                                            zx_visitstatus: 'Visit Status'.Started,
                                            zx_checkintime: Now(),
                                            zx_checkingeolocationlat: Location.Latitude,
                                            zx_checkingeolocationlong: Location.Longitude,
                                            zx_checkinaddress: LookUp(
                                                'Parties.S',
                                                Address = ThisItem.zx_Party.Address
                                            ).Address
                                        }
                                    );
                                    SaveData(
                                        OfflineVisitsToBeSynced,
                                        "OfflineVisitsToBeSynced"
                                    );
                                    Notify(
                                        "Data has been saved on local",
                                        NotificationType.Success,
                                        1000
                                    );
                                );
                                Navigate(
                                    'Visit Info',
                                    ScreenTransition.CoverRight
                                );
                                Set(
                                    _varClickedVisitAccount,
                                    ThisItem.zx_Party.Parties
                                );
                                /*Set(
                                    varCustomerforDiscount,
                                    ThisItem.zx_Party.Parties
                                );*/
                                //Set attached dist according_______________________________________________________________
                If(
                                    ThisItem.zx_Party.'Customer Type' = 'Party Type Choices'.Retailer,
                                    Set(
                                        _varSelectedRetailerAttachedDistributor,
                                        LookUp(
                                            OfflinePartiesCollection,
                                            zx_customererpcode = ThisItem.zx_Party.'Customer Code'
                                        ).zx_AttachedDistributor.Parties
                                    );
                                    ,
                                    Set(
                                        _varSelectedRetailerAttachedDistributor,
                                        Blank()
                                    )
                                );
                                Set(
                                    _varVisitId,
                                    ThisItem.zx_visitid
                                );
                                ,
                                Notify(
                                    "One Visit is Already Started.",
                                    NotificationType.Warning,
                                    1000
                                )
                            )
                        )
                    );
                    ,
                    Notify(
                        "You cannot start the subordinate visit",
                        NotificationType.Error,
                        2000
                    )
                );
                ClearCollect(
                    OfflineVisitCollection,
                    'Visit.S'
                );
            TabIndex: =0//-1
            Width: =25
            X: =108
            Y: =244
            ZIndex: =4

        Icon2_1 As icon.Leave:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =_VarGblAppColors.AccentBg
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            Height: =25
            Icon: =Icon.DockCheckProperties
            Visible: |-
                =If(
                    LookUp(
                        OfflineVisitCollection,
                        zx_visitid = ThisItem.zx_visitid
                    ).'Visit Status'= 'Visit Status'.Completed,
                    false,
                    true
                )
            Width: =25
            X: =403
            Y: =243
            ZIndex: =5

        Rectangle30 As rectangle:
            BorderColor: =RGBA(0, 18, 107, 1)
            Fill: =RGBA(102, 182, 227, 1)
            Height: =1
            OnSelect: =Select(Parent)
            Width: =600
            X: =10
            Y: =85
            ZIndex: =14

        Label30 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =35
            OnSelect: =Select(Parent)
            PaddingLeft: =0
            Text: ="Last Visit Summary"
            Width: =260
            X: =44
            Y: =104
            ZIndex: =15

        Label30_1 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =35
            OnSelect: =Select(Parent)
            Text: ="Booking History"
            Width: =200
            X: =378
            Y: =104
            ZIndex: =16

        Icon26 As icon.CalendarBlank:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(102, 182, 227, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            Height: =25
            Icon: =Icon.CalendarBlank
            OnSelect: =Select(Parent)
            Width: =25
            X: =46
            Y: =143
            ZIndex: =17

        Icon27 As icon.Currency:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(102, 182, 227, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            Height: =25
            Icon: =Icon.Currency
            OnSelect: =Select(Parent)
            Width: =25
            X: =46
            Y: =179
            ZIndex: =18

        Label30_2 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =_VarGblAppColors.PrimaryRed
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Bold
            Height: =25
            OnSelect: =Select(Parent)
            Text: ="FY"
            Width: =35
            X: =378
            Y: =141
            ZIndex: =19

        Label30_7 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =_VarGblAppColors.PrimaryRed
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Bold
            Height: =25
            OnSelect: =Select(Parent)
            Text: ="Q"
            Width: =25
            X: =378
            Y: =179
            ZIndex: =20

        Label30_8 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =_VarGblAppColors.PrimaryRed
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Bold
            Height: =25
            OnSelect: =Select(Parent)
            Text: ="M"
            Width: =25
            X: =378
            Y: =219
            ZIndex: =21

        Rating1 As rating:
            AccessibleLabel: ="Text"
            BorderColor: =RGBA(0, 18, 107, 1)
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            Default: =3
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =Self.Fill
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            FocusedBorderColor: =Self.BorderColor
            FocusedBorderThickness: =2
            Height: =30
            HoverFill: =Self.Fill
            OnSelect: =Select(Parent)
            PressedFill: =Self.Fill
            RatingFill: =_VarGblAppColors.PrimaryRed
            Width: =130
            X: =44
            Y: =219
            ZIndex: =22

        Group11 As group:
            Height: =5
            Width: =5
            X: =60
            Y: =60
            ZIndex: =22

            Circle6 As circle:
                BorderColor: =RGBA(102, 182, 227, 1)
                BorderThickness: =1
                Fill: =RGBA(0, 0, 0, 0)
                Height: =50
                OnSelect: |-
                    =Launch("tel://" & ThisItem.zx_Party.'Mobile No.')
                Width: =50
                X: =431
                Y: =18
                ZIndex: =6

            Icon3 As icon.Phone:
                AccessibleLabel: ="Icon3"
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =_VarGblAppColors.PrimaryRed
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(244, 244, 244, 1)
                Height: =37
                Icon: =Icon.Phone
                OnSelect: |-
                    =Launch("tel://" & ThisItem.zx_Party.'Mobile No.')
                PaddingLeft: =5
                PaddingRight: =5
                TabIndex: =0
                Width: =37
                X: =436
                Y: =25
                ZIndex: =8

        Group12 As group:
            Height: =5
            Width: =5
            X: =60
            Y: =60
            ZIndex: =22

            Icon3_1 As icon.Phone:
                AccessibleLabel: ="Icon3_1"
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =_VarGblAppColors.PrimaryRed
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(244, 244, 244, 1)
                Height: =35
                Icon: =Icon.Waypoint
                OnSelect: |-
                    =Launch("http://www.google.com/maps/place/" & ThisItem.zx_Party.Latitude &"," & ThisItem.zx_Party.Longitude)
                PaddingLeft: =5
                PaddingRight: =5
                TabIndex: =0
                Width: =37
                X: =496
                Y: =25
                ZIndex: =7

            Circle6_1 As circle:
                BorderColor: =RGBA(102, 182, 227, 1)
                BorderThickness: =1
                Fill: =RGBA(0, 0, 0, 0)
                Height: =50
                OnSelect: |-
                    =Launch("http://www.google.com/maps/place/" & ThisItem.zx_Party.Latitude &"," & ThisItem.zx_Party.Longitude)
                Width: =50
                X: =489
                Y: =18
                ZIndex: =9

        Label65 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =27
            OnSelect: =Select(Parent)
            Text: |-
                =Text(
                    LookUp(
                        Sort(
                           OfflineVisitCollection,
                            zx_visitdate,
                            SortOrder.Descending
                        ),
                        zx_Party.Parties = ThisItem.zx_Party.Parties && 'Visit Status' = ThisItem.'Visit Status'
                    ).zx_visitdate,
                    "dd/mm/yyyy"
                )
            Width: =200
            X: =88
            Y: =141
            ZIndex: =23

        Group14 As group:
            Height: =5
            Width: =5
            X: =60
            Y: =60
            ZIndex: =23

            Circle7 As circle:
                AccessibleLabel: ="Text"
                BorderColor: =RGBA(102, 182, 227, 1)
                BorderThickness: =1
                DisplayMode: |-
                    =If(
                        LookUp(
                            OfflineVisitCollection,
                            zx_visitid = ThisItem.zx_visitid
                        ).zx_visitstatus = 'Visit Status'.Completed,
                        DisplayMode.Disabled,
                        DisplayMode.Edit
                    )
                Fill: =RGBA(0, 0, 0, 0)
                Height: =50
                OnSelect: =
                TabIndex: =0
                Width: =50
                X: =549
                Y: =18
                ZIndex: =10

            Image15 As image:
                AccessibleLabel: ="Text"
                BorderColor: =RGBA(0, 18, 107, 1)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: |-
                    =/*If(
                        LookUp(
                            OfflineVisitCollection,
                            zx_visitid = ThisItem.zx_visitid
                        ).zx_visitstatus = 'Visit Status'.Completed,
                        DisplayMode.Disabled,
                        DisplayMode.Edit
                    )*/
                Height: =30
                Image: |-
                    =/*If(Endbtvisible = false,
                    'play-buttton','call-end')*/
                    //'play-buttton'
                    If(ThisItem.zx_visitstatus = 'Visit Status'.Started , square , 'play (1)')
                OnSelect: |-
                    =If(
                        ThisItem.'Visit Status' = [@'Visit Status'].Completed,
                        Notify(
                            "Your Visit is Already Ended",
                            NotificationType.Success,1000
                        ),
                        If(
                            Self.Image = 'play (1)',
                            (If(
                                ThisItem.createdby.'Primary Email' = User().Email,
                                If(
                                    CountIf(
                                        'Attendance.S',
                                        User.'Primary Email' = User().Email && Date = Today() && !IsBlank('Check-out Time')
                                    ) > 0,
                                    Notify(
                                        "Your day has Ended, you can not start Visit",
                                        NotificationType.Error,
                                        2000
                                    ),
                                    If(
                                        CountIf(
                                            'Attendance.S',
                                            User.'Primary Email' = User().Email && Date = Today() && !IsBlank('Check-in Time')
                                        ) = 0,
                                        Notify(
                                            "Kindly Start your day first",
                                            NotificationType.Error,
                                            2000
                                        );
                                        Navigate(Home),
                                        If(
                                            Not(
                                                Text(
                                                    ThisItem.zx_visitdate,
                                                    "dd/mm/yyyy"
                                                ) = Text(
                                                    Today(),
                                                    "dd/mm/yyyy"
                                                )
                                            ),
                                            Notify(
                                                "Visit cannot be started",
                                                NotificationType.Error,
                                                2000
                                            ),
                                            IsBlank(
                                                LookUp(
                                                    OfflineVisitCollection,
                                                    zx_visitdate = Today() && createdby.'Primary Email' = User().Email && zx_visitstatus = [@'Visit Status'].Started && Not(zx_visitid = ThisItem.zx_visitid)
                                                )
                                            ),
                                            If(
                                                Connection.Connected,
                                                Patch(
                                                    'Visit.S',
                                                    LookUp(
                                                        'Visit.S',
                                                        Visit = ThisItem.zx_visitid
                                                    ),
                                                    {
                                                        'Visit Status': 'Visit Status'.Started,
                                                        'Check-in Time': Now(),
                                                        'Check-in Geo Location Lat': Location.Latitude,
                                                        'Check-in Geo Location Long': Location.Longitude,
                                                        'Check-in Address': LookUp(
                                                            'Parties.S',
                                                            Address = ThisItem.zx_Party.Address
                                                        ).Address
                                                    }
                                                );
                                                Notify(
                                                    "Visit has been started",
                                                    NotificationType.Success,
                                                    700
                                                );
                                                ,
                                                Collect(
                                                    OfflineVisitsToBeSynced,
                                                    {
                                                        visitItem: LookUp(
                                                            OfflineVisitCollection,
                                                            zx_visitid = ThisItem.zx_visitid
                                                        ),
                                                        visitGUID: ThisItem.zx_visitid,
                                                        status: 'Visit Status'.Started,
                                                        'Check-in Time': Now(),
                                                        'Check-in Geo Location Lat': Location.Latitude,
                                                        'Check-in Geo Location Long': Location.Longitude,
                                                        'Check-in Address': LookUp(
                                                            'Parties.S',
                                                            Address = ThisItem.zx_Party.Address
                                                        ).Address
                                                    }
                                                );
                                                Patch(
                                                    OfflineVisitCollection,
                                                    LookUp(
                                                        OfflineVisitCollection,
                                                        zx_visitid = ThisItem.zx_visitid
                                                    ),
                                                    {
                                                        zx_visitstatus: 'Visit Status'.Started,
                                                        zx_checkintime: Now(),
                                                        zx_checkingeolocationlat: Location.Latitude,
                                                        zx_checkingeolocationlong: Location.Longitude,
                                                        zx_checkinaddress: LookUp(
                                                            'Parties.S',
                                                            Address = ThisItem.zx_Party.Address
                                                        ).Address
                                                    }
                                                );
                                                SaveData(
                                                    OfflineVisitsToBeSynced,
                                                    "OfflineVisitsToBeSynced"
                                                );
                                                Notify(
                                                    "Data has been saved on local",
                                                    NotificationType.Success,
                                                    1000
                                                );
                                            );
                                            Set(
                                                _VarActivetopTabID,
                                                1
                                            );
                                            Navigate(
                                                'Visit Info',
                                                ScreenTransition.CoverRight
                                            );
                                            Set(
                                                dataVisit,
                                                ThisItem
                                            );
                                            Set(
                                                _varClickedVisitAccount,
                                                ThisItem.zx_Party.Parties
                                            );
                                            Set(
                                                _varCustomerforDiscount,
                                                ThisItem.zx_Party.Parties
                                            );
                                    //Set attached dist according_______________________________________________________________
                    If(
                                                ThisItem.zx_Party.'Customer Type' = 'Party Type Choices'.Retailer,
                                                Set(
                                                    _varSelectedRetailerAttachedDistributor,
                                                    LookUp(
                                                        OfflinePartiesCollection,
                                                        zx_customercode = ThisItem.zx_Party.'Customer Code'
                                                    ).zx_AttachedDistributor.Parties
                                                );
                                                ,
                                                Set(
                                                    _varSelectedRetailerAttachedDistributor,
                                                    Blank()
                                                )
                                            );
                                            Set(
                                                _varVisitId,
                                                ThisItem.zx_visitid
                                            );
                                            ,
                                            Notify(
                                                "Visit is Already Started.",
                                                NotificationType.Warning,
                                                1000
                                            )
                                        )
                                    )
                                );
                                ,
                                Notify(
                                    "You cannot start the subordinate visit",
                                    NotificationType.Error,
                                    2000
                                )
                            ));
                            ,
                        // changing offline visit collection to table i.e OfflineVisitCollection to visit.s
                            Patch(
                                'Visit.S',
                                LookUp(
                                    'Visit.S',
                                    'Visit ID' = ThisItem.'Visit ID'
                                //zx_visitid = ThisItem.zx_visitid
                                ),
                                {
                                    zx_visitstatus: 'Visit Status'.Completed,
                                    zx_checkoutaddress: Concatenate(
                                        Location.Latitude,
                                        ",",
                                        Location.Longitude
                                    ),
                                    zx_checkouttime: Now()
                                }
                            );
                            Notify(
                                "Your visit has been successfully ended.",
                                NotificationType.Success,
                                2500
                            );
                        );
                        ClearCollect(
                            OfflineVisitCollection,
                            'Visit.S'
                        );
                        
                    );
                    Refresh('Parties.S');
                    Refresh('Visit.S')
                TabIndex: =0
                Width: =30
                X: =560
                Y: =27
                ZIndex: =11

        Label65_1 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =25
            OnSelect: =Select(Parent)
            Text: |-
                ="â‚¹" & LookUp(
                    Sort(
                        OfflineOrderHeaderCollection,
                        createdon,
                        SortOrder.Descending
                    ),
                    zx_OrderFrom.Parties = ThisItem.zx_Party.Parties
                ).zx_totalbillamount
            Width: =200
            X: =88
            Y: =179
            ZIndex: =24

        Image3 As image:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledFill: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =4
            Height: =29
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverFill: =RGBA(0, 0, 0, 0)
            Image: =pause
            OnSelect: |-
                = Navigate(
                                        'Visit Info',
                                        ScreenTransition.CoverRight
                                    );
            PressedBorderColor: =RGBA(0, 0, 0, 0)
            PressedFill: =RGBA(0, 0, 0, 0)
            Visible: =If(ThisItem.'Visit Status'=[@'Visit Status'].Started,true,false)
            Width: =50
            X: =373
            Y: =30
            ZIndex: =25

        Circle7_2 As circle:
            AccessibleLabel: ="Text"
            BorderColor: =RGBA(102, 182, 227, 1)
            BorderThickness: =1
            DisplayMode: |-
                =If(
                    LookUp(
                        OfflineVisitCollection,
                        zx_visitid = ThisItem.zx_visitid
                    ).zx_visitstatus = 'Visit Status'.Completed,
                    DisplayMode.Disabled,
                    DisplayMode.Edit
                )
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            OnSelect: |-
                = Navigate(
                                        'Visit Info',
                                        ScreenTransition.CoverRight
                                    );
            TabIndex: =0
            Visible: =If(ThisItem.'Visit Status'=[@'Visit Status'].Started,true,false)
            Width: =50
            X: =373
            Y: =20
            ZIndex: =26

        Group13 As group:
            Height: =5
            Width: =5
            X: =40
            Y: =40
            ZIndex: =26

            Circle8 As circle:
                BorderColor: =RGBA(0, 18, 107, 1)
                BorderStyle: =BorderStyle.None
                BorderThickness: =1
                Fill: =_VarGblAppColors.PrimaryRed
                Height: =45
                OnSelect: =Select(Parent)
                Width: =45
                X: =25
                Y: =22
                ZIndex: =12

            Label48 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =RGBA(255, 255, 255, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FontWeight: =FontWeight.Semibold
                Height: =30
                OnSelect: =Select(Parent)
                Text: =Left(Upper(ThisItem.zx_Party.'Customer Name'),1)
                Width: =30
                X: =32
                Y: =30
                ZIndex: =13

        Label2 As label:
            Align: =Align.Right
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            Color: =RGBA(51, 51, 51, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            Height: =33
            OnSelect: =Select(Parent)
            Size: =10
            Text: =ThisItem.'Visit Status'
            Width: =106
            X: =493
            Y: =236
            ZIndex: =27

    Container4_25 As groupContainer:
        Height: =774
        Visible: =varFilter
        Width: =607
        X: =7
        Y: =182
        ZIndex: =4

        Rectangle16_4 As rectangle:
            BorderColor: =RGBA(0, 18, 107, 1)
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(0, 0, 0, 1)
            Height: =500
            Visible: =varFilter
            Width: =2
            X: =290
            Y: =230
            ZIndex: =1

        Label8_4 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Bold
            Height: =58
            PaddingLeft: =30
            Size: =21
            Text: ="All Filters"
            Visible: =varFilter
            Width: =273
            X: =20
            Y: =40
            ZIndex: =2

        ApplyBtn_6 As button:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderThickness: =0
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =_VarGblAppColors.PrimaryRed
            FocusedBorderThickness: =
            FontWeight: =FontWeight.Semibold
            Height: =55
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: |-
                =ColorFade(
                    _VarGblAppColors.PrimaryRed
                    , 10%)
            OnSelect: |
                =ClearCollect(
                    colFilterData,
                    If(
                        IsBlank(DateFrom_2.SelectedDate) && IsBlank(radioDate_2.Selected),
                        OfflineOrderHeaderCollection,
                
                       radioDate_2.Selected.Value = "Today",
                        Filter(
                            OfflineOrderHeaderCollection,
                            IsToday(createdon) && owninguser.'Primary Email' = radioSalesperson_2.Selected.'Primary Email'
                        ),
                
                        radioDate_2.Selected.Value = "This Week",
                        Filter(
                            OfflineOrderHeaderCollection,
                            (DateValue(createdon) >= DateValue(Today()) - Weekday(Today()) + 2 && DateValue(createdon) <= DateValue(Today()) + (9 - Weekday(Today()))) && owninguser.'Primary Email' = radioSalesperson_2.Selected.'Primary Email'
                        ),
                        
                        radioDate_2.Selected.Value= "This Month",
                        Filter(
                            OfflineOrderHeaderCollection,
                            (Text(
                                createdon,
                                "mmmm"
                            ) = Text(
                                Today(),
                                "mmmm"
                            )) && owninguser.'Primary Email' = radioSalesperson_2.Selected.'Primary Email'
                        ),
                
                        !IsBlank(DateFrom_2.SelectedDate),
                        Filter(
                            OfflineOrderHeaderCollection,
                            DateValue(createdon) >= DateValue(DateFrom_2.SelectedDate) && DateValue(createdon) <= DateValue(DateTo_2.SelectedDate) && owninguser.'Primary Email' =  radioSalesperson_2.Selected.'Primary Email'
                        ),
                    
                        OfflineOrderHeaderCollection
                    )
                );
                Set(
                    varFilter,
                    !varFilter
                );
            Size: |+
                =LookUp('Environment Variable Definitions', 'Display Name'="Text Title Font Size").'Default Value'
                //_VarGblAppFonts.Size.Title
                
            Text: ="Apply Filters"
            Visible: =varFilter
            Width: =235
            X: =326
            Y: =625
            ZIndex: =3

        ClearBtn_2 As button:
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =_VarGblAppColors.PrimaryRed
            FontWeight: =FontWeight.Semibold
            Height: =55
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: |-
                =ColorFade(
                    _VarGblAppColors.PrimaryRed
                    , 10%)
            OnSelect: |-
                =Reset(DateFrom_2);
                Reset(DateTo_2);
                Reset(radioDate_2);
                Reset(radioSalesperson_2);
                Clear(colFilter);
                Clear(colFilterData)
            Size: =20
            Text: ="Clear Filters"
            Visible: =varFilter
            Width: =235
            X: =34
            Y: =625
            ZIndex: =4

        Rectangle17_2 As rectangle:
            BorderColor: =RGBA(0, 18, 107, 1)
            Fill: =RGBA(0, 0, 0, 1)
            Height: =2
            Visible: =varFilter
            Width: =607
            Y: =227
            ZIndex: =5

        Label30_5 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Semibold
            Height: =57
            Size: =18
            Text: ="Date From"
            Visible: =If(Gallery8_2.Selected.tabid=2,true,false)
            Width: =173
            X: =331
            Y: =259
            ZIndex: =6

        DateTo_2 As datepicker:
            AccessibleLabel: ="enter date to"
            BorderThickness: =1
            CalendarHeaderFill: =RGBA(56, 96, 178, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =RGBA(255,255,255,0)
            Height: =63
            HoverDateFill: =RGBA(186, 202, 226, 1)
            IconBackground: =Color.Transparent
            IconFill: =_VarGblAppColors.PrimaryRed
            InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text(Today(), "dd/mm/yyyy"))
            OnSelect: |-
                =If(
                    Gallery8_2.Selected.tabid = 2 && IsBlank(
                        LookUp(
                            colFilter,
                            Title = "Date To"
                        ).Title
                    ),
                    Collect(
                        colFilter,
                        {
                            Title: "Date To",
                            value: Text(
                                DateTo_2.SelectedDate,
                                "dd-mm-yyyy"
                            )
                        }
                    ),
                    Patch(
                        colFilter,
                        LookUp(
                            colFilter,
                            Title = "Date To"
                        ),
                        {
                            value: Text(
                                DateTo_2.SelectedDate,
                                "dd-mm-yyyy"
                            )
                        }
                    )
                )
            SelectedDateFill: =RGBA(56, 96, 178, 1)
            Size: =16
            Visible: =If(Gallery8_2.Selected.tabid=2,true,false)
            Width: =238
            X: =323
            Y: =458
            ZIndex: =7

        Label30_6 As label:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Semibold
            Height: =49
            Size: =18
            Text: ="Date To"
            Visible: =If(Gallery8_2.Selected.tabid=2,true,false)
            Width: =173
            X: =331
            Y: =409
            ZIndex: =8

        DateFrom_2 As datepicker:
            AccessibleLabel: ="enter date from"
            BorderThickness: =1
            CalendarHeaderFill: =RGBA(56, 96, 178, 1)
            Color: =RGBA(0, 0, 0, 1)
            DefaultDate: =//Today()
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =RGBA(255,255,255,0)
            Height: =63
            HoverDateFill: =RGBA(186, 202, 226, 1)
            IconBackground: =Color.Transparent
            IconFill: =_VarGblAppColors.PrimaryRed
            InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text(Today(), "dd/mm/yyyy"))
            OnSelect: |-
                =If(
                    Gallery8_2.Selected.tabid = 2 && IsBlank(
                        LookUp(
                            colFilter,
                            Title = "Date From"
                        ).Title
                    ),
                    Collect(
                        colFilter,
                        {
                            Title: "Date From",
                            value: Text(
                                DateFrom_2.SelectedDate,
                                "dd-mm-yyyy"
                            )
                        }
                    ),
                    Patch(
                        colFilter,
                        LookUp(
                            colFilter,
                            Title = "Date From"
                        ),
                        {
                            value: Text(
                                DateFrom_2.SelectedDate,
                                "dd-mm-yyyy"
                            )
                        }
                    )
                )
            SelectedDateFill: =RGBA(56, 96, 178, 1)
            Size: =16
            Visible: =If(Gallery8_2.Selected.tabid=2,true,false)
            Width: =238
            X: =322
            Y: =316
            ZIndex: =9

        Icon18_4 As icon.Cancel:
            AccessibleLabel: ="Cancel"
            BorderColor: =RGBA(0, 18, 107, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            Height: =40
            Icon: =Icon.Cancel
            OnSelect: |
                =Set(varFilter,false);
            TabIndex: =0//-1
            Visible: =varFilter
            Width: =40
            X: =541
            Y: =27
            ZIndex: =10

        radioDate_2 As radio:
            AccessibleLabel: ="Select Date filter"
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            Height: =180
            HoverColor: =RGBA(0, 18, 107, 1)
            Items: =["All","Planned","Unplanned"]
            LineHeight: =2
            OnSelect: |-
                =If(
                    Gallery8_2.Selected.tabid = 1 && IsBlank(
                        LookUp(
                            colFilter,
                            Title = Gallery8_2.Selected.Title
                        ).Title
                    ),
                    Collect(
                        colFilter,
                        {
                            Title: Gallery8_2.Selected.Title,
                            value: radioDate_2.Selected.Value
                        }
                    ),
                    Patch(
                        colFilter,
                        LookUp(
                            colFilter,
                            Title = Gallery8_2.Selected.Title
                        ),
                        {value: radioDate_2.Selected.Value}
                    )
                )
            RadioSize: =40
            Size: =18
            Visible: |-
                =//vardate
                If(Gallery8_2.Selected.tabid=1,true,false)
            Width: =248
            X: =312
            Y: =255
            ZIndex: =11

        radioSalesperson_2 As radio:
            AccessibleLabel: ="Select salesperson"
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 0, 0, 1)
            Default: =LookUp(Users,'Primary Email'=User().Email).'Full Name'
            Height: =309
            HoverColor: =RGBA(0, 18, 107, 1)
            Items: |-
                =/*Filter(
                    Users,
                    Manager.'Primary Email' = User().Email || 'Primary Email' = User().Email
                )*/
                Search(Users, TextInput4_2.Text, "firstname")
            LineHeight: =2
            OnSelect: |-
                =
                
                    If(Gallery8_2.Selected.tabid = 3  && IsBlank(LookUp(colFilter,Title= Gallery8_2.Selected.Title).Title),
                    Collect(
                        colFilter,
                        {
                            Title: Gallery8_2.Selected.Title,
                            value: radioSalesperson_2.Selected.'Full Name'
                        }
                    ),
                    Patch(colFilter,LookUp(colFilter,Title= Gallery8_2.Selected.Title),{value: radioSalesperson_2.Selected.'Full Name'})
                )
            RadioSize: =40
            Size: =18
            Visible: =If(Gallery8_2.Selected.tabid=3 && !IsBlank(TextInput4_2.Text),true,false)
            Width: =295
            X: =312
            Y: =316
            ZIndex: =12

        Gallery8_2 As gallery.galleryVertical:
            AccessibleLabel: ="Filters"
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =471
            Items: |-
                =Table(
                    {
                        Title: "Visit Type",
                        tabid: 1
                    },
                    {
                        Title: "Custom Date",
                        tabid: 2
                    },
                    {
                        Title: "Salesperson",
                        tabid: 3
                    }
                )
            Layout: =Layout.Vertical
            ShowScrollbar: =false
            TabIndex: =0//-1
            TemplateSize: =84
            Visible: =varFilter
            Width: =234
            X: =36
            Y: =259
            ZIndex: =13

            Button18_3 As button:
                Align: =Align.Left
                Color: =RGBA(0, 0, 0, 1)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                Fill: |-
                    =//Color.Transparent
                    If(ThisItem.IsSelected,ColorFade(Color.DimGrey,80%),Color.Transparent)
                FontWeight: =FontWeight.Semibold
                Height: =77
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(Color.DimGrey,80%)
                OnSelect: |-
                    =//Patch(colFilter,Defaults(colFilter),AddColumns(colFilter,"title",ThisItem.Title),{})
                    
                    
                    
                    //If(CountRows(colFilter)>0,Collect(colFilter,{Title: ThisItem.Title,value:""});
                PaddingLeft: =25
                PressedColor: =Color.DimGrey
                PressedFill: =ColorFade(Color.DimGrey,80%)
                Size: =20
                Text: =ThisItem.Title
                Width: =224
                Y: =7
                ZIndex: =1

        Display_2 As gallery.galleryHorizontal:
            AccessibleLabel: ="selected filter options"
            BorderColor: =RGBA(0, 18, 107, 1)
            DelayItemLoading: =true
            Height: =109
            Items: =colFilter
            LoadingSpinner: =LoadingSpinner.Data
            ShowScrollbar: =false
            TabIndex: =0//-1
            TemplateSize: =306
            Visible: |-
                =//If(CountRows(colFilter)=1,false,true)
                true
            Width: =607
            Y: =109
            ZIndex: =14

            Button20_5 As button:
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =DisplayMode.View
                Fill: =RGBA(204, 204, 204, 1)
                FontWeight: =FontWeight.Semibold
                Height: =82
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Size: =24
                Text: =""
                Width: =281
                X: =14
                Y: =12
                ZIndex: =1

            Label31_4 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =37
                OnSelect: =Select(Parent)
                Size: =21
                Text: |-
                    =ThisItem.Title & ":"
                Tooltip: |-
                    =ThisItem.Title & ":"
                Width: =269
                Wrap: =false
                X: =14
                Y: =12
                ZIndex: =2

            Label31_5 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =45
                OnSelect: =Select(Parent)
                Size: =21
                Text: =ThisItem.value
                Tooltip: =ThisItem.value
                Width: =289
                X: =6
                Y: =49
                ZIndex: =3

            Icon21_5 As icon.Cancel:
                AccessibleLabel: ="remove filter"
                BorderColor: =RGBA(0, 18, 107, 1)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(244, 244, 244, 1)
                Height: =25
                Icon: =Icon.Cancel
                OnSelect: |-
                    =Remove(colFilter,ThisItem);
                    Reset(radioDate_2);
                    Reset(radioSalesperson_2)
                TabIndex: =0//-1
                Width: =52
                X: =243
                Y: =18
                ZIndex: =4

        Group2_2 As group:
            Height: =5
            Width: =5
            X: =60
            Y: =60
            ZIndex: =17

            TextInput4_2 As text:
                AccessibleLabel: ="Search salesperson"
                Align: =Align.Center
                BorderColor: =RGBA(0, 18, 107, 1)
                BorderThickness: =2
                Color: =RGBA(0, 0, 0, 1)
                Default: =""
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                FocusedBorderThickness: =4
                Height: =43
                HintText: ="Search"
                HoverBorderColor: =RGBA(0, 18, 107, 1)
                HoverColor: =RGBA(0, 0, 0, 1)
                HoverFill: =RGBA(186, 202, 226, 1)
                Size: =15
                Visible: =If(Gallery8_2.Selected.tabid=3,true,false)
                Width: =271
                X: =312
                Y: =255
                ZIndex: =15

            Icon18_5 As icon.Search:
                BorderColor: =RGBA(0, 18, 107, 1)
                Color: =RGBA(0, 18, 107, 1)
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(244, 244, 244, 1)
                Height: =30
                Icon: =Icon.Search
                Visible: =If(Gallery8_2.Selected.tabid=3,true,false)
                Width: =30
                X: =322
                Y: =260
                ZIndex: =16

